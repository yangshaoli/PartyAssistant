{% extends 'login_base.html' %}

{% block script %}
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
 
<script type="text/javascript" >
	$(document).ready(function(){
		calculate_send_phone_count();
		
		$("#id_client_phone_list").keyup(function() {
			calculate_send_phone_count();
		});
	});
	
	function calculate_send_phone_count() {
	    client_phone_list = $('#id_client_phone_list').val().split(',');
	    client_phone_list_length = client_phone_list.length;     
	    count = 0;
	    for (i = 0; i < client_phone_list_length; i ++) {
	        if (client_phone_list[i].replace(/^\s+|\s+$/g, "") != "") {          
	            count = count+1;
	        }
	    }
	    $('#id_send_phone_count').html("发件人人数统计： "+count);
	}
</script>
{% endblock %}

{% block content %}
<div id="content">
  <div class="grid_a">
   <h2 class="title">发送手机短信邀请</h2>
	<form action="{% url sms_invite party.id %}" method="post" class="creat_exercise">
		{% csrf_token %}
     <div class="field">
     <label for="client_email_list">
     收件人
     </label>
     {{ form.client_phone_list.errors }}
     {{ form.client_phone_list }}
     </div>
     <div class="field">
     <label for="id_content">
     短信内容
     </label>
     {{ form.content }}
     </div>
     <div class="field">
     <label for="id_send_email_count">
     &nbsp;
     </label>
     <p id="id_send_phone_count">发件人人数统计： 0<p>
     </div>
		<input id="id_sms_invite_submit" type="submit" value="submit" />
		<input id="id_sms_invite_default_content" type='hidden' value='{{ sms_invite_default_content }}'></input>
	</form>
	<input type='button' onclick="(function(){document.getElementById('id_content').value=document.getElementById('id_sms_invite_default_content').value;})()" value='恢复默认内容'></input>
  </div>
</div>
{% endblock %}